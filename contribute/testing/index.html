
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://lind-project.github.io/lind-wasm/contribute/testing/">
      
      
        <link rel="prev" href="../toolchain/">
      
      
        <link rel="next" href="../debug-programs/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>Testing - Lind-Wasm Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/img.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#testing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Lind-Wasm Docs" class="md-header__button md-logo" aria-label="Lind-Wasm Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lind-Wasm Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Testing
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Lind-Project/lind-wasm/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Lind-Wasm Docs" class="md-nav__button md-logo" aria-label="Lind-Wasm Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Lind-Wasm Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Lind-Project/lind-wasm/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../internal/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Internal Documentation
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Internal Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/libc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    libc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/wasmtime/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Wasmtime
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/3i/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Threei and Grate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/rawposix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RawPOSIX
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/multiprocess-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-Processing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/signals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Signals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../styleguide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust style guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../toolchain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lind toolchain
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#testing-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Workflow
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#directory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Directory Structure
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-add-test-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        How to add test cases
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unit-test-suite" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unit test suite
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Unit test suite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-test-suite-does" class="md-nav__link">
    <span class="md-ellipsis">
      
        What test suite does
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-combined-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Combined Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grate-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Grate tests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Grate tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure-of-a-grate-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        Structure of a Grate Test
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grate-tests-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        Grate tests Format
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-build-and-run" class="md-nav__link">
    <span class="md-ellipsis">
      
        How to Build and Run
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug-programs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debug programs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../add-docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Adding to the docs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security policy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker-release-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker Hub release workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../e2e-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    End-to-End Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../community/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Community
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Community
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/team/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Team
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/conduct/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code of conduct
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#testing-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Workflow
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#directory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Directory Structure
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-add-test-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        How to add test cases
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unit-test-suite" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unit test suite
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Unit test suite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-test-suite-does" class="md-nav__link">
    <span class="md-ellipsis">
      
        What test suite does
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-combined-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Combined Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grate-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Grate tests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Grate tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure-of-a-grate-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        Structure of a Grate Test
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grate-tests-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        Grate tests Format
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-build-and-run" class="md-nav__link">
    <span class="md-ellipsis">
      
        How to Build and Run
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/Lind-Project/lind-wasm/edit/main/docs/contribute/testing.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="testing">Testing</h1>
<p>This document is a practical guide to setting up and using the Lind testing
infrastructure. It outlines the steps needed to run the test suites, execute unit
tests and grate tests, and understand the results produced by the test suite, and how to
contribute new tests to the framework.</p>
<p>Since Lind is currently limited to the AMD64 architecture, Docker is used to
provide a consistent and controlled testing environment across different host
systems.
You can install <a href="https://docs.docker.com/engine/install/">Docker from its website</a>.</p>
<h2 id="testing-workflow">Testing Workflow</h2>
<ol>
<li>Clone the repo using 
<div class="highlight"><pre><span></span><code>git clone https://github.com/Lind-Project/lind-wasm.git
</code></pre></div></li>
<li>Change directory to repo 
<div class="highlight"><pre><span></span><code>cd lind-wasm
</code></pre></div></li>
<li>Build Docker Image 
<div class="highlight"><pre><span></span><code>docker build --platform=linux/amd64 -f Docker/Dockerfile.e2e -t dev --target base .
</code></pre></div></li>
<li>Run the image 
<div class="highlight"><pre><span></span><code><span class="c1"># Note: The `-v` option mounts your repo into the container. This means, you can</span>
<span class="c1"># live-edit the files in the container using your host editor. And files created</span>
<span class="c1"># or edited in the container, e.g. when running `make`, persist on the host.</span>

docker<span class="w"> </span>run<span class="w"> </span>--platform<span class="o">=</span>linux/amd64<span class="w"> </span>-v<span class="w"> </span><span class="k">$(</span>PWD<span class="k">)</span>:/lind<span class="w"> </span>-w<span class="w"> </span>/lind<span class="w"> </span>-it<span class="w"> </span>dev<span class="w"> </span>/bin/bash
</code></pre></div></li>
<li>Build toolchain (glibc and wasmtime)
<div class="highlight"><pre><span></span><code># this may take a while ...
make lind-boot sysroot
</code></pre></div></li>
<li>Run the test suite 
<div class="highlight"><pre><span></span><code>./scripts/wasmtestreport.py
</code></pre></div>
Run <code>scripts/wasmtestreport.py --help</code> to list available usage options.</li>
</ol>
<h2 id="directory-structure">Directory Structure</h2>
<ul>
<li><code>tests/unit-tests/</code>: Folder containing all <code>.c</code> test cases for general testing.</li>
<li><code>tests/grate-tests/</code>: Folder containing all <code>.c</code> test cases for grate testing.</li>
<li><code>expected/</code>: Directory under each test folder for expected output files.</li>
<li><code>testfiles/</code>: Extra files needed by tests, copied into Lind FS.</li>
</ul>
<h2 id="how-to-add-test-cases">How to add test cases</h2>
<p>To add test cases, a file with .c extension containing c code can be added
to the appropriate folder in the <code>tests/unit-tests</code> or <code>tests/grate-tests</code> folder.<br />
During the test suite run, the test case will be picked up and run. Wherever possible each 
test compares the output of running the program in lind and on linux. If these output differ, 
this is considered a failure.</p>
<p>Any compilation or runtime failure on either linux or lind-wasm is considered a failure.</p>
<h2 id="unit-test-suite">Unit test suite</h2>
<h3 id="what-test-suite-does">What test suite does</h3>
<ol>
<li>
<p><strong>Test Case Collection:</strong> Scans <code>unit-tests</code> folder for <code>.c</code> files.</p>
</li>
<li>
<p><strong>Filtering:</strong> Applies include/exclude filters (<code>--run</code>, <code>--skip</code>, and
   <code>skip_test_cases.txt</code>).</p>
</li>
<li><strong>Test Execution:</strong> Compiles and executes each test case twice, with native
   gcc and with lind-wasm, and records the output. <em>(note: gcc is skipped for
   tests with expected output fixture, and for tests with non-deterministic output)</em></li>
<li><strong>Comparing Outputs:</strong>  Marks test as successful, if outputs match
   <em>(note: non-deterministic tests always succeed, if compilation and execution
   succeeds)</em></li>
<li><strong>Reporting:</strong> Test results are written to a JSON- and  an HTML-formatted
   report in the current working directory. The reports include a summary of the
   full test run, and status, error type, and output of each test case.</li>
</ol>
<h3 id="error-types">Error Types</h3>
<p>The output will show the total number of test cases, along with counts for
successes, failures, and each of the following error types:</p>
<ul>
<li>"Failure_native_compiling": Failed during GCC compiling</li>
<li>"Failure_native_running": Failed while running GCC compiled binary</li>
<li>"Native_Segmentation_Fault": Segmentation Fault while running GCC binary</li>
<li>"Native_Timeout": Timed Out during GCC run</li>
<li>"Lind_wasm_compiling": Failed during compilation using lind-wasm</li>
<li>"Lind_wasm_runtime": Failed while running lind-wasm compiled binary</li>
<li>"Lind_wasm_Segmentation_Fault": Segmentation Fault while running wasm binary</li>
<li>"Lind_wasm_Timeout": Timed out During Lind Wasm run</li>
<li>"Output_mismatch": Mismatch in GCC and Wasm outputs</li>
<li>"Unknown_Failure": Unknown Failure</li>
</ul>
<p>The outputs are split into deterministic and non-deterministic based on how the
lind-wasm outputs are compared to the native gcc output. </p>
<h3 id="example-combined-usage">Example Combined Usage</h3>
<div class="highlight"><pre><span></span><code>./scripts/wasmtestreport.py \
  --generate-html \
  --skip config_tests file_tests \
  --timeout 10 \
  --output results_json \
  --report test_report  
</code></pre></div>
<p>This will:</p>
<ul>
<li>Skip specified folders</li>
<li>Use a 10-second timeout</li>
<li>Save output as <code>results_json.json</code></li>
<li>Generate a report <code>test_report.html</code></li>
</ul>
<h2 id="grate-tests">Grate tests</h2>
<p>Grate tests are designed to validate a special feature in lind-wasm: the grate mechanism. The concept of a grate is defined in internal/3i.</p>
<p>Grate tests ensure that the grate–cage interaction model behaves correctly under the expected fork/exec execution semantics.</p>
<h3 id="structure-of-a-grate-test">Structure of a Grate Test</h3>
<p>Each grate test must contain at least two source files:</p>
<ul>
<li>A grate file</li>
<li>A cage file</li>
</ul>
<h3 id="grate-tests-format">Grate tests Format</h3>
<p><strong>Naming Convention</strong></p>
<div class="highlight"><pre><span></span><code>&lt;cage_name&gt;.c
&lt;cage_name&gt;_grate.c
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>hello.c
hello_grate.c
</code></pre></div>
<p><strong>Test Requirements</strong></p>
<p>Each grate test must:</p>
<ul>
<li>Has dispatcher function called <code>pass_fptr_to_wt</code></li>
<li>Determine test success internally</li>
<li>Exit with EXIT_FAILURE if the test fails</li>
<li>Exit normally (e.g., EXIT_SUCCESS) on success</li>
</ul>
<p>Tests are expected to be self-validating.</p>
<p><strong>Execution Model</strong></p>
<p>Grate tests must follow the fork/exec model:</p>
<ul>
<li>The grate file executes first.</li>
<li>The grate performs a fork().</li>
<li>The child process becomes the cage.</li>
<li>The grate registers the necessary handler(s).</li>
<li>The child performs exec() to execute the cage file.</li>
</ul>
<h3 id="how-to-build-and-run">How to Build and Run</h3>
<p><strong>Prerequisite</strong></p>
<p>Make sure the lind-wasm runtime has already been compiled.</p>
<p><strong>Step 1 — Compile the Grate</strong></p>
<div class="highlight"><pre><span></span><code>lind-clang<span class="w"> </span>--compile-grate<span class="w"> </span>&lt;cage_name&gt;_grate.c
</code></pre></div>
<p>This produces <code>&lt;cage_name&gt;_grate.cwasm</code></p>
<p><strong>Step 2 — Compile the Cage</strong></p>
<div class="highlight"><pre><span></span><code>lind-clang<span class="w"> </span>&lt;cage_name&gt;.c
</code></pre></div>
<p>This produces <code>&lt;cage_name&gt;.cwasm</code></p>
<p><strong>Step 3 — Run the Test</strong></p>
<div class="highlight"><pre><span></span><code>lind-wasm<span class="w"> </span>&lt;cage_name&gt;_grate.cwasm<span class="w"> </span>&lt;cage_name&gt;.cwasm
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["content.action.edit"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>